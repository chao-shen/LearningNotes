# HTTPS是什么
HTTPS = HTTP+ SSL/TLS

SSL的全称是Secure Sockets Layer，即安全套接层协议，是为网络通信提供安全及数据完整性的一种安全协议

TLS的全称是Transport Layer Security，即安全传输层协议

## https为什么是安全的
先说下http为什么是不安全的

1.比如请求个网址，它其实是把http的请求报文发送给了服务端，服务端接受处理后会返回一个响应报文，这样一个http请求就结束了

2.但信息是怎么传递的呢，你的每一个消息都会经过很多很多中间节点最终转发给服务端的(比如你的路由，小区的网关)，再此中间节点，第一不安全因素，有可能被别人篡改，即使消息不被篡改，也会被别人窃听到，会让别人看到你发送和接受的消息，第二不安全因素就是明文传输

3.https就是通过加密让http变得安全，它是通过对称加密、非对称加密、哈希算法共同作用的，来在性能和安全性上达到一个平衡，https除了对消息进行加密，还会对通信的对象进行身份验证，因为引入了证书机制，通过证书链可以对你的访问对象进行身份验证，如果不是你要访问的对象，浏览器就会提示警告

4.https不是一个新的协议，它是使用了一种叫做TLS的安全层，这个安全层提供了数据加密的支持，让http消息运行在这个安全层上面，就达到了安全，而运行在这安全层上的http就叫做https


## HTTPS加密方式
HTTPS为了兼顾安全与效率，同时使用了对称加密和非对称加密。数据是被对称加密传输的，对称加密过程需要客户端的一个密钥，为了确保能把该密钥安全传输到服务器端，采用非对称加密对该密钥进行加密传输，总的来说，对数据进行对称加密，对称加密所要使用的密钥通过非对称加密传输。

## HTTPS通信过程
![image](https://upload-images.jianshu.io/upload_images/627325-dc83fef6ac2e6c88.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/648/format/webp "")

HTTPS在传输的过程中会涉及到三个密钥：

服务器端的公钥和私钥，用来进行非对称加密

客户端生成的随机密钥，用来进行对称加密

## 一个HTTPS请求实际上包含了两次HTTP传输，可以细分为8步。

1.客户端向服务器发起HTTPS请求，连接到服务器的443端口

2.服务器端有一个密钥对，即公钥和私钥，是用来进行非对称加密使用的，服务器端保存着私钥，不能将其泄露，公钥可以发送给任何人。

3.服务器将自己的公钥发送给客户端。

4.客户端收到服务器端的公钥之后，会对公钥进行检查，验证其合法性，如果公钥有问题，那么HTTPS传输就无法继续。如果公钥合格，那么客户端会生成一个随机值，这个随机值就是用于进行对称加密的密钥，我们将该密钥称之为客户端密钥。然后用服务器的公钥对客户端密钥进行非对称加密，这样客户端密钥就变成密文了，至此，HTTPS中的第一次HTTP请求结束。

5.客户端会发起HTTPS中的第二个HTTP请求，将加密之后的客户端密钥发送给服务器。

6.服务器接收到客户端发来的密文之后，会用自己的私钥对其进行非对称解密，解密之后的明文就是客户端密钥，然后用客户端密钥对数据进行对称加密，这样数据就变成了密文。

7.然后服务器将加密后的密文发送给客户端。

8.客户端收到服务器发送来的密文，用客户端密钥对其进行对称解密，得到服务器发送的数据。这样HTTPS中的第二个HTTP请求结束，整个HTTPS传输完成。

## 常见的对称加密算法
DES、3DES、TDEA、Blowfish、RC5和IDEA

## 常见的非对称加密算法
RSA、Elgamal、Rabin、D-H、ECC（椭圆曲线加密算法）

# 参考
[Https原理及流程](https://www.jianshu.com/p/14cd2c9d2cd2)